{%- set data = graph.data -%}
<div class="panel panel-default">
      <div class="panel-heading">Waterings for <code>{{ graph.device_name }}</code></div>
      <div class="panel-body">
        <center>
        <div class="contributions-graph">
          <div class="calendar-row">
            <div class="cell weekday-heading contrib_empty"></div>
            {% for month in months -%}
            {% if month -%}
            <div class="cell month-heading contrib_empty">{{ month }}</div>
            {% else -%}
            <div class="cell contrib_empty"></div>
            {% endif -%}
            {% endfor -%}
          </div>
          {% for row in data -%}
          <div class="calendar-row">
            <div class="cell weekday-heading contrib_empty">
              {{ weekdays[loop.index-1] }}
            </div>
            {% for cell in row -%}
              <div class="cell contrib_{{ graph.cell_class(cell) }}">
                <span>{{ cell|tooltip }}</span>
              </div>
            {% endfor %}
          </div>
          {% endfor %}
          <div class="calendar-row legend">
            <div class="cell weekday-heading contrib_empty"></div>
            {% for _ in range(graph.data[0]|length - 6) %}
            <div class="cell contrib_empty"></div>
            {% endfor %}
            <!-- <div class="cell contrib_empty month-heading">Less</div>
            <div class="cell contrib_empty contrib_grad0"></div>
            <div class="cell contrib_empty contrib_grad1"></div>
            <div class="cell contrib_empty contrib_grad2"></div>
            <div class="cell contrib_empty contrib_grad3"></div>
            <div class="cell contrib_empty contrib_grad4"></div>
            <div class="cell contrib_empty month-heading">&nbsp;More</div>
            <div class="cell contrib_empty"></div>
            <div class="cell contrib_empty"></div>
            <div class="cell contrib_empty"></div> -->
          </div>
        </div>
      </div>
    </div>

<div class="row" style="margin-bottom:10px;">
    <div class="col-md-12 col-md-offset-5">
        <button type="button" data-target="#controller_{{Device.id}}" id="button_{{ Device.id }}" class="btn btn-info" data-toggle="collapse">
            Watering Controls
        </button>
    </div>
</div>

<div class = "container watercontrol collapse" id = "controller_{{Device.id}}">
    <div class="row">
        <div class="col-6 col-xs-6 form-group">
            <form method="post" action="{{ url_for('main.home') }}">
                <input class="form form-control-sm dt" name = "scheduled_date" id = "{{ Device.id }}" placeholder = "Date/Time"/>
                <input class="form hidden" name = "device_id" value = "{{Device.id}}"/>
                <br>
                <script>
                    $(".dt").flatpickr({
                        {
                            onDayCreate: function(dObj, dStr, fp, dayElem){
                                // Utilize dayElem.dateObj, which is the corresponding Date


                                if dStr in events[{{ Device.id }}]:
                                    dayElem.innerHTML += "<span class='event'></span>";
                            }
                        }
                    });
                </script>
                <input type="checkbox" class="form-check-input" id="radio{{Device.id}}">
                <label class="form-check-label" for="radio{{Device.id}}">Repeat weekly?</label>
                <br><br>
                <button type="submit" name="submit_button" class="form col-md-offset-5 btn btn-default" value="Schedule">Schedule</button>
            </form>
        </div>
        <div class="row align-items-center">
            <div class="col-6 col-xs-6 form-group text-center">
                <form method="post" action="{{ url_for('main.home') }}">
                    <br><br>
                    <input class="form hidden" name = "device_id" value = "{{Device.id}}"/>
                    <button type="submit" name="submit_button" class="btn btn-lg btn-default" style="width: 200px;" value="Water Now">Water Now</button>
                </form>
            </div>
        </div>
    </div>


</div>