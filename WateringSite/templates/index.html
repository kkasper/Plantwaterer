{% extends "base.html" %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link href="{{ url_for('static', filename='css/datepicker.css') }}"
      rel="stylesheet" type="text/css">
{% endblock %}

{% block scripts %}
    {{ super() }}
    {{ moment.include_moment() }}
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
    $(".dt").flatpickr({
        enableTime: true,
        dateFormat: "U",
        altInput: true,
        altFormat: "H:i K o\\n l F j, Y",
        minDate: "today",
    });
    $(".flatpickr-calendar").addClass("showTimeInput");
    </script>
{% endblock %}

{% block app_content %}
    {% if devices.__len__() < 1 %}
    <div class="row">
        <span class="col-md-2 col-centered text-center text-unselectable">
            <p>No devices were found to be attached to this account. :(</p>
        </span>
    </div>
    {% else %}
        {% for Device in devices %}
        <link rel="stylesheet" href="{{url_for('static', filename='css/contributionchartstyle.css')}}">
        <div class="row h-50">
            <div class="col col-centered">
                <p class="text-unselectable">{{ "[{:03d}]".format( Device.id ) }} <b>{{ Device.device_name }}</b></p>
                <div class="container">
                    {%- set graph = graphs[devices.index(Device)] %}
                    {% include "contributionchart/graph.html" -%}
                </div>

            </div>
        </div>
        <hr>
        {% endfor %}
    {% endif %}
{% endblock %}
