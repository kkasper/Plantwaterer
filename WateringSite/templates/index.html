{% extends "base.html" %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<link href="{{ url_for('static', filename='css/datepicker.css') }}"
      rel="stylesheet" type="text/css">
{% endblock %}

{% block scripts %}
    {{ super() }}
    {{ moment.include_moment() }}
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script>
    $(".dt").flatpickr({
        enableTime: true,
        dateFormat: "U",
        altInput: true,
        altFormat: "H:i K o\\n l F j, Y",
    });
    $(".flatpickr-calendar").addClass("showTimeInput");

    </script>
{% endblock %}

{% block app_content %}
    {% if devices.__len__() < 1 %}
    <div class="row">
        <span class="col-md-2 col-centered text-center text-unselectable">
            <p>No devices were found to be attached to this account. :(</p>
        </span>
    </div>
    {% else %}
        {% for Device in devices %}
        <link rel="stylesheet" href="{{url_for('static', filename='css/contributionchartstyle.css')}}">
        <div class="row h-50">
            <div class="col col-centered">
                <p class="text-unselectable">{{ "[{:03d}]".format( Device.id ) }} <b>{{ Device.device_name }}</b></p>

                <div class="container">
                    {%- set graph = graphs[devices.index(Device)] %}
                    {% include "contributionchart/graph.html" -%}
                </div>

                <div class="row" style="margin-bottom:10px;">
                    <div class="col-md-12 col-md-offset-5">
                        <button type="button" data-target="#controller_{{Device.id}}" id="button_{{ Device.id }}" class="btn btn-info" data-toggle="collapse">
                            Watering Controls
                        </button>
                    </div>
                </div>

                <div class = "container watercontrol collapse" id = "controller_{{Device.id}}">
                    <div class="row">
                        <div class="col-6 col-xs-6 form-group">
                            <input class="form-control-sm dt" placeholder = "Date/Time" id="datepicker{{Device.id}}"/>
                            <br>
                            <input type="checkbox" class="form-check-input" id="radio{{Device.id}}">
                            <label class="form-check-label" for="radio{{Device.id}}">Repeat weekly?</label>
                            <br><br>
                            <button type="button" class="col-md-offset-5 btn btn-default" >Schedule</button>
                        </div>
                        <div class="row align-items-center">
                            <div class="col-6 col-xs-6 form-group text-center">
                                <br><br><button type="button" class="btn btn-lg btn-default" style="width: 200px;">Water Now</button>
                            </div>
                        </div>
                    </div>


                </div>

            </div>
        </div>
        <hr>
        {% endfor %}
    {% endif %}
{% endblock %}
